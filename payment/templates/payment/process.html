{% extends "base.html" %}
{% load static %}

{% block title %}Pay your order{% endblock %}

{% block content %}
<div class="wrapper">
    <main class="main-content">
        <div class="container">
            <div class="order-card">
                <h1>Order Summary</h1>

                <div class="order-items">
                    {% for item in order.items.all %}
                    <div class="order-item">
                        <div class="item-image">
                            <img src="{% if item.product.image %}{{ item.product.image.url }}{% else %}{% static 'image/default_image.png' %}{% endif %}"
                                 alt="{{ item.product.name }}">
                        </div>
                        <div class="item-details">
                            <h3>{{ item.product.name }}</h3>
                            <div class="item-meta">
                                <span class="quantity">Qty: {{ item.quantity }}</span>
                                <span class="price">${{ item.price }}</span>
                            </div>
                        </div>
                        <div class="item-total">
                            ${{ item.get_cost }}
                        </div>
                    </div>
                    {% endfor %}
                </div>

                <div class="order-summary">
                    <div class="summary-row">
                        <span>Subtotal</span>
                        <span>${{ order.get_total_cost }}</span>
                    </div>
                    <div class="summary-row">
                        <span>Shipping</span>
                        <span>Free</span>
                    </div>
                    <div class="summary-row total">
                        <span>Total</span>
                        <span>${{ order.get_total_cost }}</span>
                    </div>
                </div>

                <form action="{% url 'payment:process' %}" method="post" class="payment-form">
                    {% csrf_token %}
                    <button type="submit" class="pay-button">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="1" y="4" width="22" height="16" rx="2" ry="2"></rect>
                            <line x1="1" y1="10" x2="23" y2="10"></line>
                        </svg>
                        Pay Now
                    </button>
                </form>
            </div>
        </div>
    </main>
</div>
{% endblock %}